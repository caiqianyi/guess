<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.caiqianyi.guess.core.dao.IGameMatchMapper">
    
	<sql id="Base_Where_Clause" >
	    <trim prefix="where" prefixOverrides="and|or" >
	      <if test="id != null" >
	         and id = #{id}
	      </if>
	      <if test="gameType != null" >
	         and gameType = #{gameType}
	      </if>
	      <if test="season != null" >
	         and season = #{season}
	      </if>
	      <if test="league != null" >
	         and league = #{league}
	      </if>
	      <if test="groupName != null" >
	         and groupName = #{groupName}
	      </if>
	      <if test="hostTeam != null" >
	         and hostTeam = #{hostTeam}
	      </if>
	      <if test="guestTeam != null" >
	         and guestTeam = #{guestTeam}
	      </if>
	      <if test="bestOf != null" >
	         and bestOf = #{bestOf}
	      </if>
	      <if test="matchId != null" >
	         and matchId = #{matchId}
	      </if>
	      <if test="status != null" >
	         and status = #{status}
	      </if>
	      <if test="start != null and start !=''">
		    and DATE_FORMAT(matchTime,'%Y-%m-%d')<![CDATA[>=]]>#{start,jdbcType=VARCHAR}
		  </if>
		  <if test="end != null and end !=''">
		    and DATE_FORMAT(matchTime,'%Y-%m-%d')<![CDATA[<=]]>#{end,jdbcType=VARCHAR}	
		  </if>
	    </trim>
	</sql>
	
	<sql id="Base_Column_List" >
	    id, gameType, season, league, groupName, gameSystem, hostTeam, guestTeam, 
	    score, bestOf, matchId, status, matchTime, createTime
	</sql>
	
	<select id="findByMatchId" resultType="com.caiqianyi.guess.game.entity.GameMatch">
	    select <include refid="Base_Column_List" />
	    from game_match <include refid="Base_Where_Clause" />
	</select>
	
	<select id="findById" resultType="com.caiqianyi.guess.game.entity.GameMatch">
	    select <include refid="Base_Column_List" />
	    from game_match <include refid="Base_Where_Clause" />
	</select>
	
	<select id="findByGameTypeForPager" resultType="com.caiqianyi.guess.game.entity.GameMatch">
	    select <include refid="Base_Column_List" />
	    from game_match <include refid="Base_Where_Clause" />
	</select>
	
	<insert id="insert">
	    insert into game_match (<include refid="Base_Column_List" />)
	    	values (UUID(), #{gameType}, #{season}, #{league}, #{groupName}, #{gameSystem}, #{hostTeam}, #{guestTeam}, 
	    	#{score}, #{bestOf}, #{matchId}, #{status}, #{matchTime}, NOW()
	</insert>
	
	<update id="update">
	    update game_match
	    <set>
	      <if test="status != null" >
	        status = #{status},
	      </if>
	      <if test="score != null" >
	        score = #{score}
	      </if>
	    </set>
	    where id = #{id}
	</update>
	
	<delete id="delete">
	    delete from game_match where id = #{id}
	</delete>
	
	<delete id="deleteByMatchId">
	    delete from game_match where gameType = #{gameType} and matchId = #{matchId}
	</delete>
	
</mapper>
